# [ADR] 회사명 추출 시 줄바꿈 처리 전략

## 1. Context (배경 및 문제점)
계근지 OCR 결과에서 회사명을 추출할 때, `(주)` 키워드를 기준으로 앞뒤 단어를 찾는 정규표현식을 사용했습니다.

그러나 `(주)` 뒤에 바로 줄바꿈(`\n`)이 있고 다음 줄에 주소(예: `경기도...`)가 나오는 경우, 정규표현식의 `\s*` 패턴이 줄바꿈까지 포함하여 매칭하는 문제가 발생했습니다.

이로 인해 회사명이 아닌 주소의 첫 단어(예: `경기도`)가 회사명으로 오인식되는 오류가 발견되었습니다.

**문제 상황 예시:**
```text
정우리사이클링 (주) \n
경기도 화성시...
```

- 기존 Regex: `\(주\)\s*([가-힣]+)`
- 오인식 결과: `(주) 경기도`

## 2. Alternatives (고려한 대안들)
1.  **줄바꿈 전처리:**
    -   텍스트 전체에서 줄바꿈을 공백으로 치환한 후 파싱.
    -   하지만 줄바꿈은 데이터 필드를 구분하는 중요한 정보일 수 있으므로, 전체 치환은 다른 필드 파싱에 악영향을 줄 수 있음.
2.  **Regex 패턴 정교화:**
    -   `(주)`와 회사명 사이의 공백 매칭 시, 줄바꿈을 제외한 공백(Space, Tab)만 허용하도록 제한.


## 3. Decision (결정)
**Regex 패턴 정교화** 방식을 선택했습니다.
- 정규표현식에서 `\s*` (모든 공백 문자) 대신 **`[ ]*` (스페이스만 허용)** 패턴을 사용하여, 같은 줄에 있는 텍스트만 회사명 후보로 인식하도록 제한했습니다.

**수정된 패턴:**
- `\(주\)[ ]*([가-힣a-zA-Z0-9]+)` : `(주)` 뒤에 줄바꿈 없이 이어지는 단어만 매칭
- `([가-힣a-zA-Z0-9]+)[ ]*\(주\)` : `(주)` 앞에 줄바꿈 없이 이어지는 단어만 매칭


## 4. Consequences (결과)
- **장점:** `(주)` 뒤에 줄바꿈이 있는 경우, 다음 줄의 텍스트(주소 등)를 회사명으로 잘못 잡는 오탐(False Positive)을 방지할 수 있습니다.
- **단점:** 만약 실제로 회사명이 줄바꿈되어 표기된 경우(`삼성\n전자 (주)`)는 인식하지 못할 수 있으나, 계근지 특성상 회사명은 한 줄에 표기되는 것이 일반적이므로 수용 가능한 제약입니다.
